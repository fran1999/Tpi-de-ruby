<p id="notice"><%= notice %></p>

<h1>Appointments</h1>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Patient name</th>
      <th>Patient surname</th>
      <th>Phone</th>
      <th>Notes</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @appointments.each do |appointment| %>
      <tr>
        <td><%= appointment.date %></td>
        <td><%= appointment.patient_name %></td>
        <td><%= appointment.patient_surname %></td>
        <td><%= appointment.phone %></td>
        <td><%= appointment.notes %></td>

        <td><%= link_to 'Show', [@professional,appointment] %></td>
        <% if ! loggedUserHasRole?("consulta") %>
          <td><%= link_to 'Edit', edit_professional_appointment_path(@professional,appointment) %></td>
          <td><%= link_to 'Destroy', [@professional,appointment], method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>

      </tr>
    <% end %>
  </tbody>
</table>

<br>
<% if ! loggedUserHasRole?("consulta") %>
  <%= link_to 'New Appointment', new_professional_appointment_path(@professional) %> |
<% end %>
<%= link_to 'Back', professionals_path %> |
<%= link_to 'Export Appointments', professional_export_appointments_path(@professional)%> |
<%= link_to 'Back to home', root_path%>